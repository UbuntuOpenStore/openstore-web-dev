---
import { RatingType, type ReviewData } from "@/lib/schema";

import SvgThumbsUp from "@/components/icons/ThumbsUp";
import SvgNeutral from "@/components/icons/Neutral";
import SvgHappy from "@/components/icons/Happy";
import SvgThumbsDown from "@/components/icons/ThumbsDown";
import SvgBuggy from "@/components/icons/Buggy";

const ICON_MAP = {
  [RatingType.THUMBS_UP]: SvgThumbsUp,
  [RatingType.HAPPY]: SvgHappy,
  [RatingType.NEUTRAL]: SvgNeutral,
  [RatingType.THUMBS_DOWN]: SvgThumbsDown,
  [RatingType.BUGGY]: SvgBuggy,
};

const dateFormatter = new Intl.DateTimeFormat(undefined, {
  dateStyle: "medium",
});

export type Props = {
  review: ReviewData;
};

const { review } = Astro.props;
const Icon = ICON_MAP[review.rating];
---

<div class="flex flex-row">
  <div class="mt-4 mr-4">
    <Icon />
  </div>

  <div>
    <p class="text-lg font-bold">{review.author}</p>
    <p class="text-sm text-gray-600">
      Reviewed {dateFormatter.format(review.date)} for version {review.version}
    </p>
    <p>{review.body}</p>
  </div>
</div>
