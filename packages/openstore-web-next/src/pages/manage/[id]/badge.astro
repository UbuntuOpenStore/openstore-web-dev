---
import Loading from "@/components/Loading.astro";
import BadgePage from "@/components/manage/BadgePage.astro";
import BaseLayout from "@/layouts/BaseLayout.astro";

export const prerender = false;

const { id } = Astro.params;
if (!id) {
  return Astro.redirect("/manage/");
}

const apikey = Astro.cookies.get("apikey")?.value;
if (!apikey) {
  return Astro.redirect("/login/");
}
---

<BaseLayout
  title="OpenStore"
  pageTitle="Manage App Badge | OpenStore"
  description="The open source app store for Ubuntu Touch"
  schema={undefined}
>
  <BadgePage id={id} server:defer>
    <Loading slot="fallback" />
  </BadgePage>
</BaseLayout>
